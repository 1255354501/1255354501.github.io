/*
 * Copyright (C) 2017, hapjs.org. All rights reserved.
 */
!function(){
	"use strict";
	var o=navigator.userAgent.toLowerCase();
	function r(e,n){
		for(var t in n=n||{})e[t]=n[t];
		return e
		}
		function i(e,n,t){
			var a=document.createElement("iframe"),
			o="hwfastapp://"+e;n&&(o=o+"/"+n),
			t&&0<Object.keys(t).length&&(o=o+"?"+(t=Object.keys(t).map(function(e){
				return e+"="+encodeURIComponent(t[e])}).join("&"))),
				
				a.src=o,
				document.body.appendChild(a),
				console.log(a)
				a.style.display="none"}
				function e(e){
					var n={available:new Function,};
					"function"==typeof e?n.available=e:"object"==typeof e&&r(n,e);
					var t=!1,a=n.available;
					n.available=function(){t||(t=!0,a.apply(null,arguments))},
					n.available.call(null,!0)}
					function n(e,n,t){
						var a;!function(){
							var e=navigator.userAgent;
							if(e){
								if(0<=(e=e.toLowerCase()).indexOf("huaweibrowser"))return;
								var n=e.indexOf("android"),t=e.indexOf("huawei");
								if(t<0&&(t=e.indexOf("honor")),0<=n&&0<=t){
									var a=e.slice(n+8,n+9);if(8<=a)return 1;
									if((a=e.slice(n+8,n+10))&&a.indexOf(";")<0&&10<=a)return 1}}}()?i(e,n,t):(function(e,n,t){
										var a,o="",i=(i="http://122.11.38.205/fastapprouter/")+(new Date).getTime()+"/";
										n&&0===n.indexOf("/")&&(n=1===n.length?"":n.substr(1)),e&&(i=i+"?i="+e),n&&(i=i+"&p="+n),
										function(e){
											if(!e)return 1;
											var n=void 0;
											for(n in e)return;return 1}(t)?-1<(a=window.location.search).indexOf("?")&&(o=a.substr(1)):o=Object.keys(t).map(function(e){return e+"="+encodeURIComponent(t[e])}).join("&"),""!==o&&(i=i+"&a="+encodeURIComponent(o));
											var r=document.createElement("img");
											r.src=i,r.style.width="1px",r.style.height="1px",
											r.style.display="none",
											document.body.appendChild(r)}(e,n,t=t||{}),
											function(){
												var e=navigator.userAgent;
												if(e){
													var n=(e=e.toLowerCase()).indexOf("android"),t=e.indexOf("huawei");
													if(t<0&&(t=e.indexOf("honor")),0<=n&&0<=t){var a=e.slice(n+8,n+9);if(9<=a)return;
													if((a=e.slice(n+8,n+10))&&a.indexOf(";")<0&&10<=a)return}}
													return 1}()&&(a=new Date,setTimeout(function(){new Date-a<=830&&i(e,n,t)},800)))}function c(e){var n=+(e.match(/.*Android (\d+).*/i)||[])[1];
													return!isNaN(n)&&n<10}function l(e){var n=+(e.match(/.*Android (\d+).*/i)||[])[1];return!isNaN(n)&&10<=n}function d(e){return 1<(e.match(/.*(iPhone|iPad|Mac OS).*/i)||[]).length}function u(e,n,t,a){var o=e,i="";n&&(o=o+"?i="+n),t&&(o=o+"&p="+t),o+="&random="+Math.random(),
													!function(e){
														if(!e)return 1;
														var n=void 0;for(n in e)return;
														return 1}(a)?i=Object.keys(a).map(function(e){
															return e+"="+encodeURIComponent(a[e])}).join("&"):-1<(e=window.location.search).indexOf("?")&&(i=e.substr(1)),""!==i&&(o=o+"&a="+encodeURIComponent(i));var r=document.createElement("img");r.src=o,r.style.width="1px",r.style.height="1px",r.style.display="none",document.body.appendChild(r)}function f(e,n){var t,a=document.createElement("img");a.style.width="1px",a.style.height="1px",a.style.display="none",e+="/"+1e20*Math.random(),a.src=e,document.body.appendChild(a),n=r({availableTimeout:2e3},n),a.complete?n.available.call(null,!0):(a.onload=function(){clearTimeout(t),n.available.call(null,!0)},t=setTimeout(function(){n.available.call(null,!1)},n.availableTimeout))}function s(e,n,t){var a=navigator.userAgent;d(a)?console.debug("Detect device: Apple device;"):c(a)?(console.debug("Detect device: Below Android Q;"),u("http://thefatherofsalmon.com",e,n,t)):(l(a)?console.debug("Detect device: Greater and equal than Android Q;"):console.debug("Detect device: None match;"),u("http://thefatherofsalmon.com",e,n,t),u("http://v2.thefatherofsalmon.com",e,n,t))}function t(e,n,t,a){return t=t||{},a&&(t.__PROMPT__=1,t.__NAME__=a),s(e,n,t)}function a(e,n){return s("command","",{type:"shortcut",package:e,name:n})}
													function v(e){var n={available:new Function};
													"function"==typeof e?n.available=e:"object"==typeof e&&r(n,e);
													var t,a,o=!1,i=n.available;
													return n.available=function(){o||(o=!0,i.apply(null,arguments))},
													t=n,void(d(a=navigator.userAgent)?(console.debug("Detect device: Apple device;"),t.available.call(null,!1)):c(a)?(console.debug("Detect device: Below Android Q;"),
													f("http://thefatherofsalmon.com/images",t)):(l(a)?console.debug("Detect device: Greater and equal than Android Q;"):console.debug("Detect device: None match;"),
													f("http://thefatherofsalmon.com/images",t),
													f("http://v2.thefatherofsalmon.com/images",t)))}!function(e){void 0===e&&(e=o);var n=e.indexOf("android"),t=e.indexOf("huawei"),a=e.indexOf("honor");return 0<=n&&(0<=t||0<=a)}()?(window.appRouter=t,window.installShortcut=a,window.channelReady=v):(window.appRouter=window.appRouterHw=n,window.channelReady=e)}();
